# 进程管理

Linux内核中把对进程地描述结构叫task_struct

进程控制块PCB（process control block）
- 状态信息：描述进程地动态变化
- 链接信息：描述进程的父子关系
- 各种标识符：用简单数字对进程进行标识
- 进程间通信信息：描述多个进程在同一任务上协作工作
- 时间和定时器信息：描述进程在生存周期内使用CPU时间的统计
计费等信息
- 调度信息：描述进程优先级、调度策略等信息
- 文件系统信息：对进程使用文件情况进行记录
- 虚拟内存信息：描述每个进程拥有的地址空间
- 处理器环境信息：描述进程的执行环境（处理器的寄存器及堆栈等）

Linux进程状态及转换
- TASK_RUNNING 就绪
- TASK_UNINTERRUPTIBLE 深度睡眠
- TASK_INTERRUPTIBLE 浅度睡眠
- TASK_STOP 暂停
- TASK_ZOMBIE 僵死

进程之间的亲属关系
- 进程1（init）是所有进程的祖先，系统中所有的进程形成一颗进程树

为了节省空间，Linux把内核栈和一个紧挨着PCB的小数据结构thread_info放在一起，占用8KB的内存区

thread_info表示和硬件关系更密切的数据，第一个字段就是task_struct

把PCB与内核栈放在一起有什么好处：
- 内核可以方便而快速的找到PCB
- 避免在创建进程时动态分配额外的内存

在Linux中，为了表示当前正在运行的进程，定义了一个current宏，可以把它看作全局变量来用。

0号进程永远不会被撤销，它的PCB被静态分配在内核的数据字段中。

## 进程和线程

进程是系统资源分配的基本单位，线程是独立运行的基本单位

进程和线程共享代码、数据、进程空间、打开的文件等等，线程只拥有自己的寄存器和栈

内核使用同一个结构task_struct来表示进程、线程和内核线程。也使用统一的调度算法对三者进行调度。

在内核中都通过do_fork()分别创建

